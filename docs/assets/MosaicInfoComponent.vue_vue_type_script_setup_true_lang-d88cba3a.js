import{l as p,f as h,d as y,g,C as s,w as k,c as b,a as m,t as v,b as n,h as I,u as l,o as u}from"./index-8529961b.js";import{d as S,e as r}from"./eternalbookprotocol-1dc854f0.js";import{a as $}from"./namespace-fd566c76.js";import{M as o}from"./MosaicInfoRowComponent-61cb84d5.js";const c=p(),f=h();async function T(e){const i="get block info:";if(typeof f.blockRepo>"u"){c.logger.error(i,"repository undefined.");return}return await f.blockRepo.getBlockByHeight(e).toPromise().then(a=>a).catch(a=>{c.logger.error(i,"failed.",a)})}async function B(e){const i="get block timestamp:";if(typeof f.blockRepo>"u"){c.logger.error(i,"repository undefined.");return}const a=await T(e);if(typeof a>"u"){c.logger.error(i,"get block info failed.");return}return S(f.epochAdjustment,a.timestamp)}const R={class:"container"},w={class:"row"},N={class:"col-12 text-center"},V=y({__name:"MosaicInfoComponent",props:{mosaicInfo:null},setup(e){const i=e,a=g(0),d=g(s.STR_NA);return k(i.mosaicInfo,async()=>{if(typeof i.mosaicInfo>"u"){a.value=0,d.value=s.STR_NA;return}B(i.mosaicInfo.startHeight).then(t=>{a.value=typeof t<"u"?t:0}),$(i.mosaicInfo.id).then(t=>{d.value=typeof t<"u"?t:s.STR_NA})},{immediate:!0}),(t,C)=>(u(),b("article",R,[m("div",w,[m("div",N,[m("h4",null,v(t.$t("mosaicInfo.title")),1)])]),n(o,{title:t.$t("mosaicInfo.id"),data:e.mosaicInfo.id.toHex()},null,8,["title","data"]),n(o,{title:t.$t("mosaicInfo.alias"),data:d.value},null,8,["title","data"]),n(o,{title:t.$t("mosaicInfo.supply"),data:e.mosaicInfo.supply.toString()},null,8,["title","data"]),n(o,{title:t.$t("mosaicInfo.height"),data:e.mosaicInfo.startHeight.toString()},null,8,["title","data"]),a.value>0?(u(),I(o,{key:0,title:t.$t("mosaicInfo.date"),data:t.$d(new Date(a.value),"long")},null,8,["title","data"])):(u(),I(o,{key:1,title:t.$t("mosaicInfo.date"),data:l(s).STR_NA},null,8,["title","data"])),n(o,{title:t.$t("mosaicInfo.address"),data:e.mosaicInfo.ownerAddress.plain()},null,8,["title","data"]),n(o,{title:t.$t("mosaicInfo.supplyMutable"),data:l(r)(e.mosaicInfo.flags.supplyMutable)},null,8,["title","data"]),n(o,{title:t.$t("mosaicInfo.transferable"),data:l(r)(e.mosaicInfo.flags.transferable)},null,8,["title","data"]),n(o,{title:t.$t("mosaicInfo.restrictable"),data:l(r)(e.mosaicInfo.flags.restrictable)},null,8,["title","data"]),n(o,{title:t.$t("mosaicInfo.revokable"),data:l(r)(e.mosaicInfo.flags.revokable)},null,8,["title","data"])]))}});export{V as _};
