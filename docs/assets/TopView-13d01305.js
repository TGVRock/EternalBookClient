import{u as S}from"./WriteMosaic-0a5910ed.js";import{g as P,_ as O}from"./DataAreaComponent.vue_vue_type_script_setup_true_lang-9b178074.js";import{d as g,o as p,c as v,a as s,t as h,b as d,u as l,v as m,l as E,A as M,C as f,g as k,w as L,F as H,r as V,T as U,m as K,n as A,h as F,i as R}from"./index-f88ab9ca.js";import{_ as D}from"./SelectboxComponent.vue_vue_type_script_setup_true_lang-1cade574.js";import{M as C}from"./MosaicInfoRowComponent-06ad42d0.js";import{_ as Z}from"./TextAreaComponent.vue_vue_type_script_setup_true_lang-b0183a1a.js";import{d as y,e as z}from"./eternalbookprotocol-7793f020.js";import{u as N,g as W}from"./WriteOnChainData-334071ce.js";import{g as Y}from"./mosaic-faef121a.js";import{g as j}from"./namespace-f2629d4f.js";import{b as q}from"./account-9ad19166.js";const x={class:"row my-2"},G={class:"col-md-3 col-form-label"},J={class:"col-md-9"},Q=g({__name:"FeeSelectboxComponent",props:{value:null},emits:["update:value"],setup(i,{emit:o}){const e=t=>{const a=t.target;o("update:value",a.value)};return(t,a)=>(p(),v("div",x,[s("label",G,h(t.$t("preview.fee")),1),s("div",J,[d(D,{value:i.value,onChange:e,attributes:{ariaLabel:"tx-fee"},items:[{key:"default",value:l(m).Default,display:t.$t("preview.feeDefault")},{key:"fast",value:l(m).Fast,display:t.$t("preview.feeFast")},{key:"average",value:l(m).Average,display:t.$t("preview.feeAverage")},{key:"slow",value:l(m).Slow,display:t.$t("preview.feeSlow")},{key:"slowest",value:l(m).Slowest,display:t.$t("preview.feeSlowest")}]},null,8,["value","items"])])]))}}),ee={class:"row"},te={class:"col-12"},ae={class:"input-group justify-content-around"},se={class:"input-group-btn"},oe={class:"btn btn-primary"},le={id:"buttonSelectFileText"},ne=g({__name:"FileSelectButtonComponent",props:{base64:null},emits:["update:base64"],setup(i,{emit:o}){const e=t=>{const a=t.target.files||null;if(a===null||typeof a.length>"u"||a.length<1)return;const u=new FileReader;u.onload=()=>{o("update:base64",u.result)},u.readAsDataURL(a[0])};return(t,a)=>(p(),v("div",ee,[s("div",te,[s("div",ae,[s("label",se,[s("div",oe,[s("span",le,h(t.$t("writer.fileSelect")),1),s("input",{type:"file",class:"d-none",onChange:e},null,32)])])])])]))}}),ie={class:"row my-2"},re={class:"col-md-3 col-form-label"},ce={class:"col-md-9"},de=["value","placeholder","rows"],ue=g({__name:"TextareaAreaComponent",props:{itemName:null,placeholder:null,rows:null,value:null},emits:["update:value"],setup(i,{emit:o}){const e=t=>{const a=t.target;o("update:value",a.value)};return(t,a)=>(p(),v("div",ie,[s("label",re,h(i.itemName),1),s("div",ce,[s("textarea",{class:"form-control",value:i.value,onChange:e,placeholder:i.placeholder,rows:i.rows},null,40,de)])]))}}),me={class:"row my-2"},pe={class:"col-lg-6 align-self-center text-center"},_e={class:"col-lg-6 align-self-center"},ve={key:0,class:"my-2"},he={key:1,class:"animate__animated animate__fadeIn my-2"},fe=g({__name:"InputAreaComponent",setup(i){const o=E(),e=N(),t=M(()=>Math.ceil(e.dataBase64.length/f.TX_DATASIZE_PER_TRANSFER)),a=M(()=>Math.ceil(t.value/f.TX_DATA_TX_NUM)),u=M(()=>(e.dataBase64.length+t.value*f.TX_OVERHEAD_SIZE_PER_INNER+a.value*(f.TX_DATASIZE_PER_TRANSFER+f.TX_OVERHEAD_SIZE_PER_INNER))*(r.get(o.feeKind)||f.TX_FEE_MULTIPLIER_DEFAULT)*Math.pow(10,-1*f.TX_XYM_DIVISIBILITY)),r=new Map([[m.Default,f.TX_FEE_MULTIPLIER_DEFAULT],[m.Fast,f.TX_FEE_MULTIPLIER_DEFAULT],[m.Average,f.TX_FEE_MULTIPLIER_DEFAULT],[m.Slow,f.TX_FEE_MULTIPLIER_DEFAULT],[m.Slowest,f.TX_FEE_MULTIPLIER_DEFAULT]]);return W().then(n=>{typeof n>"u"||(r.set(m.Fast,y(n,m.Fast)),r.set(m.Average,y(n,m.Average)),r.set(m.Slow,y(n,m.Slow)),r.set(m.Slowest,y(n,m.Slowest)))}),(n,c)=>(p(),v("section",me,[s("div",pe,[d(O,{base64:l(e).dataBase64,mime:l(P)(l(e).dataBase64)},null,8,["base64","mime"])]),s("div",_e,[d(Z,{"item-name":n.$t("preview.title"),placeholder:n.$t("writer.pleaseInputItem",{item:n.$t("preview.title")}),value:l(e).title,"onUpdate:value":c[0]||(c[0]=_=>l(e).title=_)},null,8,["item-name","placeholder","value"]),d(ue,{"item-name":n.$t("preview.message"),placeholder:n.$t("writer.pleaseInputItem",{item:n.$t("preview.message")}),rows:5,value:l(e).message,"onUpdate:value":c[1]||(c[1]=_=>l(e).message=_)},null,8,["item-name","placeholder","value"]),d(Q,{value:l(o).feeKind,"onUpdate:value":c[2]||(c[2]=_=>l(o).feeKind=_)},null,8,["value"]),d(ne,{base64:l(e).dataBase64,"onUpdate:base64":c[3]||(c[3]=_=>l(e).dataBase64=_)},null,8,["base64"]),l(a)===0?(p(),v("div",ve,[s("h6",null,h(n.$t("preview.info")),1),s("p",null,h(n.$t("preview.notice")),1)])):(p(),v("div",he,[s("h6",null,h(n.$t("preview.info")),1),d(C,{title:n.$t("preview.dataSize"),data:l(z)(l(e).dataBase64.length)+" "+n.$t("preview.byte")},null,8,["title","data"]),d(C,{title:n.$t("preview.entire"),data:l(a).toString()},null,8,["title","data"]),d(C,{title:n.$t("preview.predictFee"),data:l(u).toFixed(6)+" xym"},null,8,["title","data"])]))])]))}}),ge={class:"row my-2"},$e={class:"col-md-3 col-form-label"},we={class:"col-md-9"},be=["value"],Se=["value"],ye=g({__name:"CreatedMosaicAreaComponent",props:{value:null},emits:["update:value"],setup(i,{emit:o}){const e=E(),t=S(),a=k([]);L(()=>t.ownerInfo,()=>{const r="created mosaic area watch:";if(e.logger.debug(r,"start",t.ownerAddress),a.value=[],typeof t.ownerInfo>"u"){e.logger.error(r,"account info invalid.");return}const n=t.ownerInfo.address;Y(n).then(async c=>{const _=[];c.forEach(w=>{_.push(w.id)}),j(_).then(w=>{_.forEach(T=>{const b=w.find(X=>X.mosaicId.equals(T)),B=typeof b>"u"||b.names.length===0?"":b==null?void 0:b.names[0].name;a.value.push({id:T,alias:B})})}).catch(w=>{e.logger.error(r,"get mosaics names failed.",w),a.value=[]})}).catch(c=>{e.logger.error(r,"get mosaics failed.",c),a.value=[]}),e.logger.debug(r,"end")},{immediate:!0});const u=r=>{const n=r.target;o("update:value",n.value)};return(r,n)=>(p(),v("div",ge,[s("label",$e,h(r.$t("mosaicInfo.id")),1),s("div",we,[s("select",{"aria-label":"owned-mosaic",value:i.value,onChange:u,class:"form-select"},[(p(!0),v(H,null,V(a.value,c=>(p(),v("option",{key:c.id.toHex(),value:c.id.toHex()},h(c.alias.length>0?c.alias+" (ID: "+c.id.toHex()+")":c.id.toHex()),9,Se))),128))],40,be)])]))}}),Ie=g({__name:"RelatedMosaicAreaComponent",setup(i){const o=N();return(e,t)=>(p(),v("section",null,[d(ye,{value:l(o).relatedMosaicIdStr,"onUpdate:value":t[0]||(t[0]=a=>l(o).relatedMosaicIdStr=a)},null,8,["value"]),d(U,{class:"text-center","next-route-name":"WriteOnChainData","item-name":e.$t("writer.writeOnChain")},null,8,["item-name"])]))}}),ke={class:"form-check"},Me=["value","id"],Ce=["for"],I=g({__name:"CheckboxComponent",props:{id:null,itemName:null,checked:{type:Boolean}},emits:["update:checked"],setup(i,{emit:o}){const t=k("cb"+i.id),a=u=>{const r=u.target;o("update:checked",r.checked)};return(u,r)=>(p(),v("div",ke,[s("input",{type:"checkbox",value:i.checked,onChange:a,class:"form-check-input",id:t.value},null,40,Me),s("label",{class:"form-check-label",for:t.value},h(i.itemName),9,Ce)]))}}),Ee={class:"row my-2"},Te={class:"col-md-3 col-form-label"},Ae={class:"col-md-9 col-form-label"},Fe={class:"row row-cols-2"},Re={class:"col-md-3"},Le={class:"col-md-3"},Ue={class:"col-md-3"},De={class:"col-md-3"},Ne=g({__name:"MosaicFlagAreaComponent",setup(i){const o=S();return(e,t)=>(p(),v("div",Ee,[s("div",Te,[s("label",null,h(e.$t("writer.mosaicFlags")),1)]),s("div",Ae,[s("div",Fe,[s("div",Re,[d(I,{id:"SupplyMutable","item-name":e.$t("mosaicInfo.supplyMutable"),checked:l(o).mosaicFlags.supplyMutable,"onUpdate:checked":t[0]||(t[0]=a=>l(o).mosaicFlags.supplyMutable=a)},null,8,["item-name","checked"])]),s("div",Le,[d(I,{id:"Transferable","item-name":e.$t("mosaicInfo.transferable"),checked:l(o).mosaicFlags.transferable,"onUpdate:checked":t[1]||(t[1]=a=>l(o).mosaicFlags.transferable=a)},null,8,["item-name","checked"])]),s("div",Ue,[d(I,{id:"Restrictable","item-name":e.$t("mosaicInfo.restrictable"),checked:l(o).mosaicFlags.restrictable,"onUpdate:checked":t[2]||(t[2]=a=>l(o).mosaicFlags.restrictable=a)},null,8,["item-name","checked"])]),s("div",De,[d(I,{id:"Revokable","item-name":e.$t("mosaicInfo.revokable"),checked:l(o).mosaicFlags.revokable,"onUpdate:checked":t[3]||(t[3]=a=>l(o).mosaicFlags.revokable=a)},null,8,["item-name","checked"])])])])]))}}),Be={class:"row my-2"},Xe={class:"col-md-3 col-form-label"},Pe={class:"col-md-9"},Oe=["value","placeholder","min"],He=g({__name:"NumberAreaComponent",props:{itemName:null,placeholder:null,value:null,min:null},emits:["update:value"],setup(i,{emit:o}){const e=t=>{const a=t.target;o("update:value",Number(a.value))};return(t,a)=>(p(),v("div",Be,[s("label",Xe,h(i.itemName),1),s("div",Pe,[s("input",{type:"number",value:i.value,onChange:e,class:"form-control",placeholder:i.placeholder,min:i.min},null,40,Oe)])]))}}),Ve=g({__name:"CreateMosaicAreaComponent",setup(i){const o=S();return(e,t)=>(p(),v("section",null,[d(Ne),d(He,{"item-name":e.$t("mosaicInfo.supply"),placeholder:e.$t("writer.pleaseInputItem",{item:e.$t("mosaicInfo.supply")}),value:l(o).amount,"onUpdate:value":t[0]||(t[0]=a=>l(o).amount=a),min:1},null,8,["item-name","placeholder","value"]),d(U,{class:"text-center","next-route-name":"CreateMosaic","item-name":e.$t("writer.createMosaic")},null,8,["item-name"])]))}}),Ke={class:"row my-2"},Ze={class:"col-md-3 col-form-label"},ze={class:"col-md-9"},We=g({__name:"SSSLinkedSelectAreaComponent",setup(i){const o=E(),e=K(),t=S(),a=k([]);return L(()=>[e.sssLinked,o.useSSS],async()=>{var c;const u="sss linked selectbox area watch:";o.logger.debug(u,"start",{sssLinked:e.sssLinked,sssUse:o.useSSS});const r=e.sssLinked&&o.useSSS?e.address:((c=o.account)==null?void 0:c.address.plain())||"";a.value.push({key:r,value:r,display:r}),t.ownerAddress=r;const n=await q(r);for(let _=0;_<n.length;_++)a.value.push({key:n[_].plain(),value:n[_].plain(),display:"(multisig) "+n[_].plain()});o.logger.debug(u,"end")},{immediate:!0}),(u,r)=>(p(),v("div",Ke,[s("label",Ze,h(u.$t("mosaicInfo.address")),1),s("div",ze,[d(D,{value:l(t).ownerAddress,"onUpdate:value":r[0]||(r[0]=n=>l(t).ownerAddress=n),attributes:{ariaLabel:"address"},items:a.value},null,8,["value","items"])])]))}});var $=(i=>(i.CreateMosaic="CreateMosaic",i.RelatedMosaic="RelatedMosaic",i))($||{});const Ye={class:"container animate__animated animate__fadeIn"},je={class:"my-2"},qe={class:"row my-2"},xe={class:"col-lg-3 d-lg-grid gap-lg-2 mt-2 mb-auto"},Ge={class:"col-lg-9 tab-content"},ct=g({__name:"TopView",setup(i){const o=S(),e=k($.CreateMosaic);o.ownerAddress="";function t(){e.value=$.CreateMosaic}function a(){e.value=$.RelatedMosaic}return(u,r)=>(p(),v("article",Ye,[d(fe),s("section",je,[d(We)]),s("section",qe,[s("div",xe,[s("div",{class:A(["col-6 col-lg-12 btn text-lg-start",{"btn-success":e.value===l($).CreateMosaic}]),onClick:t},h(u.$t("writer.modeCreate")),3),s("div",{class:A(["col-6 col-lg-12 btn text-lg-start",{"btn-success":e.value===l($).RelatedMosaic}]),onClick:a},h(u.$t("writer.modeRelated")),3)]),s("div",Ge,[e.value===l($).CreateMosaic?(p(),F(Ve,{key:0,class:"animate__animated animate__fadeIn"})):R("",!0),e.value===l($).RelatedMosaic?(p(),F(Ie,{key:1,class:"animate__animated animate__fadeIn"})):R("",!0)])])]))}});export{ct as default};
