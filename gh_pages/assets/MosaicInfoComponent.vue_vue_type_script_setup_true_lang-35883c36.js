import{l as p,f as y,d as h,g,C as l,w as k,c as b,a as d,t as S,b as i,h as I,u as s,o as m}from"./index-14e42fd2.js";import{C as v,c as r}from"./eternalbookprotocol-ae71e651.js";import{a as $}from"./namespace-c02a817d.js";import{M as a}from"./MosaicInfoRowComponent-fa62dd86.js";const u=p(),c=y();async function T(e){const o="get block info:";if(typeof c.blockRepo>"u"){u.logger.error(o,"repository undefined.");return}return await c.blockRepo.getBlockByHeight(e).toPromise()}async function B(e){const o="get block timestamp:";if(typeof c.blockRepo>"u"){u.logger.error(o,"repository undefined.");return}const n=await T(e);if(typeof n>"u"){u.logger.error(o,"get block info failed.");return}return v(c.epochAdjustment,n.timestamp)}const R={class:"container"},w={class:"row"},C={class:"col-12 text-center"},V=h({__name:"MosaicInfoComponent",props:{mosaicInfo:null},setup(e){const o=e,n=g(0),f=g(l.STR_NA);return k(o.mosaicInfo,async()=>{if(typeof o.mosaicInfo>"u"){n.value=0,f.value=l.STR_NA;return}B(o.mosaicInfo.startHeight).then(t=>{n.value=typeof t<"u"?t:0}),$(o.mosaicInfo.id).then(t=>{f.value=typeof t<"u"?t:l.STR_NA})},{immediate:!0}),(t,N)=>(m(),b("article",R,[d("div",w,[d("div",C,[d("h4",null,S(t.$t("mosaicInfo.title")),1)])]),i(a,{title:t.$t("mosaicInfo.id"),data:e.mosaicInfo.id.toHex()},null,8,["title","data"]),i(a,{title:t.$t("mosaicInfo.alias"),data:f.value},null,8,["title","data"]),i(a,{title:t.$t("mosaicInfo.supply"),data:e.mosaicInfo.supply.toString()},null,8,["title","data"]),i(a,{title:t.$t("mosaicInfo.height"),data:e.mosaicInfo.startHeight.toString()},null,8,["title","data"]),n.value>0?(m(),I(a,{key:0,title:t.$t("mosaicInfo.date"),data:t.$d(new Date(n.value),"long")},null,8,["title","data"])):(m(),I(a,{key:1,title:t.$t("mosaicInfo.date"),data:s(l).STR_NA},null,8,["title","data"])),i(a,{title:t.$t("mosaicInfo.address"),data:e.mosaicInfo.ownerAddress.plain()},null,8,["title","data"]),i(a,{title:t.$t("mosaicInfo.supplyMutable"),data:s(r)(e.mosaicInfo.flags.supplyMutable)},null,8,["title","data"]),i(a,{title:t.$t("mosaicInfo.transferable"),data:s(r)(e.mosaicInfo.flags.transferable)},null,8,["title","data"]),i(a,{title:t.$t("mosaicInfo.restrictable"),data:s(r)(e.mosaicInfo.flags.restrictable)},null,8,["title","data"]),i(a,{title:t.$t("mosaicInfo.revokable"),data:s(r)(e.mosaicInfo.flags.revokable)},null,8,["title","data"])]))}});export{V as _};
